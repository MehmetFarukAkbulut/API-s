<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Harita / Konum</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <style>
    :root { --bg:#0b1221; --panel:#101a30; --accent:#22d3ee; --text:#e5e7eb; --muted:#94a3b8; }
    *{box-sizing:border-box;}
    body{margin:0;font-family:"Inter","Segoe UI",sans-serif;background:radial-gradient(circle at 20% 20%,rgba(34,211,238,0.08),transparent 30%),linear-gradient(135deg,#0b1221,#0f172a);color:var(--text);min-height:100vh;}
    header{max-width:1180px;margin:0 auto;padding:28px 16px 8px;display:flex;gap:12px;align-items:center;flex-wrap:wrap;}
    .btn-home{padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.15);background:rgba(34,211,238,0.12);color:#7dd3fc;text-decoration:none;}
    h1{margin:0;font-size:32px;}
    p.lead{margin:6px 0 0;color:var(--muted);}
    .panel{max-width:1180px;margin:0 auto 18px;padding:16px;background:var(--panel);border:1px solid rgba(255,255,255,0.08);border-radius:16px;box-shadow:0 24px 70px rgba(0,0,0,0.35);}
    .bar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:10px;}
    input{padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,0.12);background:#0c1528;color:#fff;min-width:220px;}
    .btn{border:none;padding:10px 14px;border-radius:12px;background:linear-gradient(120deg,rgba(34,211,238,0.8),rgba(168,85,247,0.7));color:#fff;cursor:pointer;transition:all .2s;box-shadow:0 12px 36px rgba(0,0,0,0.25);}
    .btn.secondary{background:rgba(34,211,238,0.18);box-shadow:none;}
    .btn:hover{transform:translateY(-1px);}
    #map{height:520px;border-radius:16px;border:1px solid rgba(255,255,255,0.06);overflow:hidden;}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0;}
    .chip{padding:8px 12px;border-radius:999px;background:rgba(34,211,238,0.12);color:#7dd3fc;border:1px solid rgba(34,211,238,0.3);cursor:pointer;}
    .info{margin-top:10px;color:var(--muted);}
  </style>
</head>
<body>
  <header>
    <a class="btn-home" href="../index.html">Ana sayfa</a>
    <div>
      <h1>Harita / Konum</h1>
      <p class="lead">Hızlı arama, konum gösterimi ve favori şehirler.</p>
    </div>
  </header>
  <div class="panel">
    <div class="bar">
      <input id="q" placeholder="Adres, şehir (örn: Berlin)">
      <button class="btn" id="go">Bul</button>
      <button class="btn secondary" id="geo">Konumumu bul</button>
      <span id="status" class="info">Hazır</span>
    </div>
    <div class="chips" id="chips"></div>
    <div id="map"></div>
    <div class="info" id="meta"></div>
  </div>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
  (function(){
    const quick=["Istanbul","London","Berlin","Paris","New York","Tokyo","Sydney"];
    const chips=document.getElementById("chips");
    chips.innerHTML=quick.map(c=>`<span class="chip" data-city="${c}">${c}</span>`).join("");
    chips.addEventListener("click",e=>{const c=e.target.dataset.city;if(c){document.getElementById("q").value=c;search(c);}});
    const status=document.getElementById("status");
    const meta=document.getElementById("meta");

    const map=L.map("map").setView([39,35],5);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap"}).addTo(map);
    let marker=L.marker([39,35]).addTo(map);

    async function search(term){
      if(!term){status.textContent="Lütfen bir yer yazın.";return;}
      status.textContent="Aranıyor...";
      try{
        const res=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(term)}&limit=1`);
        const data=await res.json();
        if(!data.length){status.textContent="Bulunamadı";return;}
        const place=data[0];
        const lat=Number(place.lat), lon=Number(place.lon);
        marker.setLatLng([lat,lon]);
        map.setView([lat,lon],13);
        meta.textContent=`${place.display_name}`;
        status.textContent="Hazır";
      }catch(err){
        status.textContent="Hata";
      }
    }

    document.getElementById("go").addEventListener("click",()=>search(document.getElementById("q").value.trim()));
    document.getElementById("geo").addEventListener("click",()=>{
      if(!navigator.geolocation){status.textContent="Tarayıcı desteklemiyor";return;}
      navigator.geolocation.getCurrentPosition(pos=>{
        const {latitude,longitude}=pos.coords;
        marker.setLatLng([latitude,longitude]);
        map.setView([latitude,longitude],13);
        meta.textContent="Mevcut konum";
      },()=>status.textContent="Konum alınamadı");
    });
  })();
  </script>
</body>
</html>
