<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Hava Durumu</title>
  <style>
    :root {
      --bg:#0b1221;
      --panel:#101a30;
      --accent:#22d3ee;
      --accent2:#a855f7;
      --text:#e5e7eb;
      --muted:#94a3b8;
    }
    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family:"Inter","Segoe UI",sans-serif;
      background:
        radial-gradient(circle at 20% 20%,rgba(34,211,238,0.09),transparent 30%),
        radial-gradient(circle at 110% 110%,rgba(168,85,247,0.18),transparent 40%),
        linear-gradient(135deg,#020617,#0f172a);
      color:var(--text);
      min-height:100vh;
      position:relative;
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position:fixed;
      inset:-25%;
      background:
        radial-gradient(circle at 10% 0%,rgba(56,189,248,0.25),transparent 55%),
        radial-gradient(circle at 90% 100%,rgba(129,140,248,0.22),transparent 55%);
      opacity:0.8;
      filter:blur(18px);
      z-index:-1;
      animation:drift 22s ease-in-out infinite alternate;
      pointer-events:none;
    }

    @keyframes drift{
      0%{transform:translate3d(0,0,0) scale(1);}
      50%{transform:translate3d(-30px,10px,0) scale(1.05);}
      100%{transform:translate3d(40px,-25px,0) scale(1.08);}
    }

    /* Cursor glow */
    .cursor-glow{
      position:fixed;
      width:260px;
      height:260px;
      border-radius:999px;
      pointer-events:none;
      z-index:0;
      background:radial-gradient(circle at center, rgba(34,211,238,0.22), transparent 70%);
      mix-blend-mode:screen;
      opacity:0;
      transition:opacity .25s ease-out;
      transform:translate3d(-50%,-50%,0);
    }
    body:hover .cursor-glow{
      opacity:1;
    }

    /* Scroll reveal */
    .reveal-init{
      opacity:0;
      transform:translateY(12px) scale(0.985);
      filter:blur(4px);
      transition:
        opacity .5s ease-out,
        transform .5s ease-out,
        filter .5s ease-out;
    }
    .reveal-visible{
      opacity:1;
      transform:translateY(0) scale(1);
      filter:blur(0);
    }

    header{
      max-width:1100px;
      margin:0 auto;
      padding:26px 16px 10px;
    }

    h1{
      margin:0;
      font-size:30px;
      letter-spacing:0.3px;
      background:linear-gradient(120deg,#e0f2fe,#7dd3fc,#a855f7);
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      text-shadow:0 0 18px rgba(15,23,42,0.85);
      animation:headlineGlow 12s ease-in-out infinite;
    }

    @keyframes headlineGlow{
      0%{filter:drop-shadow(0 0 10px rgba(34,211,238,0.35));}
      50%{filter:drop-shadow(0 0 16px rgba(168,85,247,0.55));}
      100%{filter:drop-shadow(0 0 10px rgba(34,211,238,0.35));}
    }

    p.lead{
      margin:6px 0 0;
      color:var(--muted);
      font-size:14px;
      opacity:0.9;
    }

    .panel{
      max-width:1100px;
      margin:0 auto 26px;
      padding:16px 16px 18px;
      background:radial-gradient(circle at top left,rgba(15,23,42,0.95),rgba(15,23,42,0.92));
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.35);
      box-shadow:0 24px 80px rgba(0,0,0,0.7);
      position:relative;
      overflow:hidden;
      backdrop-filter:blur(20px);
    }

    .panel::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at var(--hover-x,20%) var(--hover-y,0%),rgba(34,211,238,0.18),transparent 55%),
        radial-gradient(circle at 120% 160%,rgba(168,85,247,0.24),transparent 55%);
      opacity:0.85;
      mix-blend-mode:soft-light;
      pointer-events:none;
      transition:background-position 0.3s ease-out;
    }

    .panel::after{
      content:"";
      position:absolute;
      inset:-1px;
      background:conic-gradient(from 220deg,
        rgba(34,211,238,0.35),
        rgba(168,85,247,0.5),
        transparent,
        transparent,
        rgba(34,211,238,0.3));
      opacity:0.35;
      mask:
        linear-gradient(#000,#000) content-box,
        linear-gradient(#000,#000);
      -webkit-mask:
        linear-gradient(#000,#000) content-box,
        linear-gradient(#000,#000);
      mask-composite:exclude;
      -webkit-mask-composite:xor;
      padding:1px;
      border-radius:18px;
      pointer-events:none;
      animation:panelBorder 18s linear infinite;
    }

    @keyframes panelBorder{
      0%{transform:rotate(0deg);}
      100%{transform:rotate(360deg);}
    }

    .bar{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-bottom:14px;
      position:relative;
      z-index:2;
    }

    input{
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(148,163,184,0.7);
      background:rgba(15,23,42,0.92);
      color:#fff;
      min-width:200px;
      font-size:14px;
      outline:none;
      transition:border-color 0.2s ease, box-shadow 0.2s ease, background 0.2s ease, transform 0.15s ease;
      flex:1;
    }

    input::placeholder{
      color:rgba(148,163,184,0.9);
    }

    input:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(34,211,238,0.7),0 0 30px rgba(34,211,238,0.35);
      background:rgba(15,23,42,0.98);
      transform:translateY(-1px);
    }

    .btn{
      border:none;
      padding:10px 16px;
      border-radius:999px;
      background:
        radial-gradient(circle at 0 0,rgba(34,211,238,0.6),transparent 55%),
        linear-gradient(120deg,rgba(34,211,238,0.88),rgba(168,85,247,0.8));
      color:#fff;
      cursor:pointer;
      transition:all 0.22s cubic-bezier(0.22,0.61,0.36,1);
      box-shadow:0 14px 35px rgba(0,0,0,0.65);
      font-weight:500;
      font-size:14px;
      position:relative;
      overflow:hidden;
      transform:translateZ(0);
      white-space:nowrap;
    }

    .btn::after{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(120deg,rgba(255,255,255,0.25),transparent 60%);
      opacity:0;
      transform:translateX(-40%);
      transition:opacity 0.25s ease, transform 0.4s ease;
      pointer-events:none;
    }

    .btn:hover{
      transform:translateY(-2px) scale(1.02);
      box-shadow:0 20px 50px rgba(15,23,42,0.9);
    }

    .btn:hover::after{
      opacity:1;
      transform:translateX(40%);
    }

    .btn:active{
      transform:translateY(0) scale(0.99);
      box-shadow:0 8px 20px rgba(15,23,42,0.9);
    }

    /* Popüler şehirler grid */
    .popular-cities{
      margin:22px 0 18px;
      padding-bottom:10px;
      border-bottom:1px solid rgba(148,163,184,0.28);
    }

    .popular-cities h2{
      margin:0 0 14px;
      font-size:18px;
      color:var(--text);
      opacity:0.9;
      letter-spacing:0.4px;
    }

    .city-grid{
      display:grid;
      grid-template-columns:repeat(4,minmax(0,1fr));
      gap:10px;
    }

    .city-item{
      position:relative;
      border-radius:14px;
      border:1px solid rgba(34,211,238,0.35);
      background:rgba(15,23,42,0.95);
      box-shadow:0 10px 25px rgba(15,23,42,0.7);
      overflow:hidden;
      transition:
        transform 0.25s cubic-bezier(0.22,0.61,0.36,1),
        box-shadow 0.25s,
        border-color 0.25s,
        grid-column 0.25s;
    }

    .city-item.active{
      grid-column:1 / -1;
      box-shadow:0 20px 60px rgba(15,23,42,0.95);
      border-color:rgba(34,211,238,0.85);
      transform:translateY(-2px) scale(1.01);
    }

    .city-btn{
      width:100%;
      padding:10px 14px;
      background:transparent;
      border:none;
      color:#e2e8f0;
      font-size:15px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
    }

    .city-main{
      display:flex;
      align-items:center;
      gap:8px;
    }

    .city-flag{
      font-size:18px;
    }

    .city-name{
      font-weight:500;
    }

    .city-country{
      font-size:12px;
      color:var(--muted);
    }

    .city-arrow{
      font-size:13px;
      color:var(--muted);
      opacity:0.8;
      transition:transform 0.25s;
    }

    .city-item.active .city-arrow{
      transform:rotate(90deg);
    }

    .city-extra{
      border-top:1px solid rgba(15,23,42,0.9);
      background:radial-gradient(circle at top left,rgba(34,211,238,0.16),transparent 55%);
      padding:0 14px;
      max-height:0;
      opacity:0;
      overflow:hidden;
      transition:max-height 0.4s ease, opacity 0.3s ease, padding 0.3s ease;
    }

    .city-item.active .city-extra{
      padding:8px 14px 12px;
      max-height:550px;
      opacity:1;
    }

    .city-extra-inner{
      font-size:13px;
      color:var(--muted);
      transition:opacity .3s ease, transform .3s ease;
    }

    /* smooth içerik değişimi */
    .city-extra-inner.fade-out{
      opacity:0;
      transform:translateY(4px);
    }
    .city-extra-inner.fade-in{
      opacity:1;
      transform:translateY(0);
    }

    .city-extra-inner strong{
      color:var(--text);
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:12px;
      position:relative;
      z-index:1;
    }

    .card{
      padding:14px 14px 16px;
      border-radius:14px;
      border:1px solid rgba(148,163,184,0.45);
      background:
        radial-gradient(circle at top left,rgba(34,211,238,0.14),transparent 60%),
        radial-gradient(circle at bottom right,rgba(15,23,42,0.95),rgba(15,23,42,0.98));
      position:relative;
      overflow:hidden;
      box-shadow:0 18px 40px rgba(15,23,42,0.9);
      transform:translate3d(0,6px,0);
      opacity:0;
      animation:cardIn 0.7s ease-out forwards;
      animation-delay:var(--delay,0ms);
    }

    @keyframes cardIn{
      0%{opacity:0;transform:translate3d(0,10px,0) scale(0.98);}
      100%{opacity:1;transform:translate3d(0,0,0) scale(1);}
    }

    .card h3{
      margin:10px 0 4px;
      font-size:22px;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:4px 9px;
      border-radius:999px;
      background:rgba(15,23,42,0.95);
      border:1px solid rgba(34,211,238,0.6);
      color:#7dd3fc;
      font-size:11px;
      letter-spacing:0.04em;
      text-transform:uppercase;
    }

    .badge::before{
      content:"";
      width:7px;
      height:7px;
      border-radius:999px;
      background:radial-gradient(circle,#22c55e,#22c55e 40%,transparent 60%);
      box-shadow:0 0 8px rgba(34,197,94,0.9);
    }

    .badge.is-loading::before{
      animation:dotPulse 1.2s ease-in-out infinite;
    }

    @keyframes dotPulse{
      0%,100%{transform:scale(0.9);box-shadow:0 0 4px rgba(34,197,94,0.4);}
      50%{transform:scale(1.25);box-shadow:0 0 12px rgba(34,197,94,1);}
    }

    .muted{color:var(--muted);font-size:13px;}

    @media (max-width:900px){
      .city-grid{grid-template-columns:repeat(2,minmax(0,1fr));}
    }
    @media (max-width:600px){
      header{padding-top:20px;}
      h1{font-size:24px;}
      .panel{margin:0 10px 22px;padding:14px 12px 16px;}
      .bar{gap:8px;}
      input{min-width:0;flex:1;}
      .btn{width:auto;}
      .city-grid{grid-template-columns:repeat(1,minmax(0,1fr));}
    }
  
/* --- mobile-shared-opt --- */
@media(max-width:768px){
  .bar, .chips, .hero-actions, .topbar, .tab-bar, .filter-bar{
    flex-wrap:nowrap !important;
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
    gap:8px;
    padding-bottom:6px;
  }
  .bar::-webkit-scrollbar,
  .chips::-webkit-scrollbar,
  .hero-actions::-webkit-scrollbar,
  .topbar::-webkit-scrollbar,
  .tab-bar::-webkit-scrollbar,
  .filter-bar::-webkit-scrollbar{display:none;}
}
@media (prefers-reduced-motion: reduce){
  *, *::before, *::after{animation:none !important;transition:none !important;scroll-behavior:auto !important;}
}
/* --- end mobile-shared-opt --- */
  </style>
</head>
<body>
  <!-- Cursor glow katmanı -->
  <div class="cursor-glow"></div>

  <header class="reveal-init">
    <h1 id="titleMain">Weather</h1>
    <p class="lead" id="leadMain">Current, today and tomorrow by city.</p>
  </header>

  <div class="panel reveal-init" id="panel">
    <div class="bar">
      <a class="btn" href="../index.html">Ana sayfa</a>
      <input id="city" placeholder="City (e.g. Istanbul)">
      <button class="btn" id="search">Search</button>
      <span class="badge" id="status">Ready</span>
    </div>

    <div class="popular-cities">
      <h2 id="popularTitle">Popular cities</h2>
      <div class="city-grid" id="cityGrid">
        <!-- 1. satır -->
        <div class="city-item active" data-city="Istanbul">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Istanbul</div>
                <div class="city-country">Turkiye</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra">
            <div class="city-extra-inner">
              Select a city or type it in the search box.
            </div>
          </div>
        </div>
        <div class="city-item" data-city="Ankara">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Ankara</div>
                <div class="city-country">Turkiye</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Izmir">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Izmir</div>
                <div class="city-country">Trkiye</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="London">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">London</div>
                <div class="city-country">United Kingdom</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>

        <!-- 2. satır -->
        <div class="city-item" data-city="Paris">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Paris</div>
                <div class="city-country">France</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Berlin">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Berlin</div>
                <div class="city-country">Germany</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Madrid">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Madrid</div>
                <div class="city-country">Spain</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Rome">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Rome</div>
                <div class="city-country">Italy</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>

        <!-- 3. satır -->
        <div class="city-item" data-city="New York">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">New York</div>
                <div class="city-country">ABD</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Los Angeles">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Los Angeles</div>
                <div class="city-country">ABD</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Chicago">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Chicago</div>
                <div class="city-country">ABD</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Toronto">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Toronto</div>
                <div class="city-country">Canada</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>

        <!-- 4. satır -->
        <div class="city-item" data-city="Vancouver">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Vancouver</div>
                <div class="city-country">Canada</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Tokyo">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Tokyo</div>
                <div class="city-country">Japan</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Osaka">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Osaka</div>
                <div class="city-country">Japan</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Seoul">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Seoul</div>
                <div class="city-country">South Korea</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>

        <!-- 5. satır -->
        <div class="city-item" data-city="Beijing">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Beijing</div>
                <div class="city-country">China</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Shanghai">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Shanghai</div>
                <div class="city-country">China</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Hong Kong">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Hong Kong</div>
                <div class="city-country">China</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Singapore">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Singapore</div>
                <div class="city-country">Singapore</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>

        <!-- 6. satır -->
        <div class="city-item" data-city="Dubai">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Dubai</div>
                <div class="city-country">United Arab Emirates</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Moscow">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Moscow</div>
                <div class="city-country">Russia</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Bangkok">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Bangkok</div>
                <div class="city-country">Thailand</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Mumbai">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Mumbai</div>
                <div class="city-country">India</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>

        <!-- 7. satır -->
        <div class="city-item" data-city="Delhi">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Delhi</div>
                <div class="city-country">India</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="So Paulo">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">São Paulo</div>
                <div class="city-country">Brazil</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Rio de Janeiro">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Rio de Janeiro</div>
                <div class="city-country">Brazil</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Buenos Aires">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Buenos Aires</div>
                <div class="city-country">Argentina</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>

        <!-- 8. satır -->
        <div class="city-item" data-city="Sydney">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Sydney</div>
                <div class="city-country">Australia</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Melbourne">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Melbourne</div>
                <div class="city-country">Australia</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Mexico City">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Mexico City</div>
                <div class="city-country">Mexico</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
        <div class="city-item" data-city="Johannesburg">
          <button class="city-btn" type="button">
            <div class="city-main">
              <span class="city-flag">????</span>
              <div>
                <div class="city-name">Johannesburg</div>
                <div class="city-country">South Africa</div>
              </div>
            </div>
            <span class="city-arrow">▼</span>
          </button>
          <div class="city-extra"><div class="city-extra-inner"></div></div>
        </div>
      </div>
    </div>
  </div>

  <script>
  // Cursor glow + scroll reveal
  (function(){
    const glow = document.querySelector('.cursor-glow');
    const revealEls = document.querySelectorAll('.reveal-init');

    window.addEventListener('pointermove', (e) => {
      if(!glow) return;
      glow.style.transform = 'translate3d(' + e.clientX + 'px,' + e.clientY + 'px,0)';
    });

    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if(entry.isIntersecting){
          entry.target.classList.add('reveal-visible');
          io.unobserve(entry.target);
        }
      });
    }, {threshold:0.15});

    revealEls.forEach(el => io.observe(el));
  })();
  </script>

  <script>
  (function(){
    const cityEl    = document.getElementById("city");
    const status    = document.getElementById("status");
    const panel     = document.getElementById("panel");
    const cityItems = document.querySelectorAll(".city-item");
    let firstRender = true;

    const countryMeta = {
      TR:{name:"Turkey"},
      GB:{name:"United Kingdom"},
      FR:{name:"France"},
      DE:{name:"Germany"},
      ES:{name:"Spain"},
      IT:{name:"Italy"},
      US:{name:"United States"},
      CA:{name:"Canada"},
      JP:{name:"Japan"},
      KR:{name:"South Korea"},
      CN:{name:"China"},
      HK:{name:"China (HK)"},
      SG:{name:"Singapore"},
      AE:{name:"UAE"},
      RU:{name:"Russia"},
      TH:{name:"Thailand"},
      IN:{name:"India"},
      BR:{name:"Brazil"},
      AR:{name:"Argentina"},
      AU:{name:"Australia"},
      MX:{name:"Mexico"},
      ZA:{name:"South Africa"}
    };

    const cityCountryMap = {
      "Istanbul":"TR","Ankara":"TR","Izmir":"TR",
      "London":"GB","Paris":"FR","Berlin":"DE","Madrid":"ES","Rome":"IT",
      "New York":"US","Los Angeles":"US","Chicago":"US",
      "Toronto":"CA","Vancouver":"CA",
      "Tokyo":"JP","Osaka":"JP",
      "Seoul":"KR","Beijing":"CN","Shanghai":"CN","Hong Kong":"HK",
      "Singapore":"SG","Dubai":"AE",
      "Moscow":"RU","Bangkok":"TH",
      "Mumbai":"IN","Delhi":"IN",
      "So Paulo":"BR","Rio de Janeiro":"BR","Buenos Aires":"AR",
      "Sydney":"AU","Melbourne":"AU",
      "Mexico City":"MX","Johannesburg":"ZA"
    };

    const flagEmoji = code => code ? code.toUpperCase().replace(/./g,c=>String.fromCodePoint(127397 + c.charCodeAt(0))) : "";
    Object.keys(countryMeta).forEach(k=>{countryMeta[k].flag = flagEmoji(k);});

    // Dil tercihi (prefLang) – sadece en/tr
    const langPref = (localStorage.getItem('prefLang')||'en')==='tr'?'tr':'en';
    document.documentElement.lang = langPref;

    // Üst başlık ve genel UI metinleri
    const uiText = {
      en: {
        title:       'Weather',
        lead:        'Current, today and tomorrow by city.',
        placeholder: 'City (e.g. Istanbul)',
        search:      'Search',
        status:      'Ready',
        popular:     'Popular cities',
        selectCity:  'Select a city or type it in the search box.'
      },
      tr: {
        title:       'Hava Durumu',
        lead:        'Şehir adına göre anlık, bugün ve yarın hava bilgileri.',
        placeholder: 'Şehir (örn: İstanbul)',
        search:      'Ara',
        status:      'Hazır',
        popular:     'Popüler şehirler',
        selectCity:  'Bir şehir seçin veya arama kutusuna yazın.'
      }
    };

    // Kart, durum ve hata etiketleri
    const labels = {
      en: {
        today:          'Today',
        tomorrow:       'Tomorrow',
        rain:           'Rain',
        prediction:     'Prediction range: 24 hours',
        wind:           'Wind',
        cloud:          'Cloud',
        momentWind:     'Moment wind',
        loading:        'Loading...',
        error:          'Error',
        cityNotFound:   'City not found',
        errorPrefix:    'Error: ',
        rainUnitSuffix: ' mm'
      },
      tr: {
        today:          'Bugün',
        tomorrow:       'Yarın',
        rain:           'Yağış',
        prediction:     'Tahmin aralığı: 24 saat',
        wind:           'Rüzgar',
        cloud:          'Bulutluluk',
        momentWind:     'Anlık rüzgar',
        loading:        'Yükleniyor...',
        error:          'Hata',
        cityNotFound:   'Şehir bulunamadı',
        errorPrefix:    'Hata: ',
        rainUnitSuffix: ' mm'
      }
    };

    const ui  = uiText[langPref];
    const lbl = labels[langPref];

    const safeSet = (id,val)=>{
      const el=document.getElementById(id);
      if(el) el.textContent=val;
    };

    // Başlık ve bar metinleri
    safeSet('titleMain', ui.title);
    safeSet('leadMain', ui.lead);
    if(cityEl) cityEl.placeholder = ui.placeholder;
    safeSet('search', ui.search);
    safeSet('status', ui.status);
    safeSet('popularTitle', ui.popular);

    // İstanbul kutusundaki başlangıç mesajı
    const firstExtra = document.querySelector(".city-item.active .city-extra-inner");
    if(firstExtra && !firstExtra.dataset.i18nApplied){
      firstExtra.textContent = ui.selectCity;
      firstExtra.dataset.i18nApplied = "1";
    }

    cityEl.value = "Istanbul";

    async function geocode(q){
      const url = `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(q)}&language=${langPref}&count=1`;
      const r = await fetch(url);
      const j = await r.json();
      const p = j?.results?.[0];
      if(!p) throw new Error(lbl.cityNotFound);
      return {
        lat:p.latitude,
        lon:p.longitude,
        city:p.name,
        countryCode:p.country_code
      };
    }

    async function fetchWeather(lat,lon){
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&hourly=temperature_2m,cloudcover,windspeed_10m&daily=temperature_2m_max,temperature_2m_min,precipitation_sum&current_weather=true&timezone=auto`;
      const r = await fetch(url);
      return r.json();
    }

    function resolveFlag(code){
      if(!code) return "";
      return countryMeta[code]?.flag || flagEmoji(code);
    }

    function updateActiveHeader(cityName, countryCode){
      const activeItem = document.querySelector(".city-item.active");
      if(!activeItem) return;
      const meta = countryMeta[countryCode] || {name:countryCode || "",flag:resolveFlag(countryCode)};
      const nameEl    = activeItem.querySelector(".city-name");
      const countryEl = activeItem.querySelector(".city-country");
      const flagEl    = activeItem.querySelector(".city-flag");
      if(nameEl)    nameEl.textContent    = cityName;
      if(countryEl) countryEl.textContent = meta.name || cityName;
      if(flagEl)    flagEl.textContent    = meta.flag || resolveFlag(countryCode);
    }

    // Popüler şehir listesi bayrak + ülke isimleri
    document.querySelectorAll(".city-item").forEach(item=>{
      const nameEl = item.querySelector(".city-name");
      const countryEl = item.querySelector(".city-country");
      const flagEl = item.querySelector(".city-flag");
      const cityName = nameEl?.textContent?.trim() || "";
      const code = cityCountryMap[cityName] || "";
      if (code) {
        if(flagEl) flagEl.textContent = resolveFlag(code);
        const meta = countryMeta[code];
        if (meta?.name && countryEl) countryEl.textContent = meta.name;
        item.dataset.country = code;
      }
    });

    function iconForCode(code){
      const map = {
        0:"☀️",1:"🌤️",2:"⛅",3:"☁️",
        45:"🌫️",48:"🌫️",
        51:"🌦️",53:"🌦️",55:"🌧️",
        56:"🌧️",57:"🌧️",
        61:"🌧️",63:"🌧️",65:"🌧️",
        66:"🌧️",67:"🌧️",
        71:"🌨️",73:"🌨️",75:"🌨️",
        80:"🌧️",81:"🌧️",82:"🌧️",
        85:"🌨️",86:"🌨️",
        95:"⛈️",96:"⛈️",99:"⛈️"
      };
      return map[code] || "";
    }

    function descForCode(code){
      const maps = {
        en: {
          0: "Clear sky",1: "Mostly clear",2: "Partly cloudy",3: "Overcast",
          45: "Foggy",48: "Foggy",
          51: "Light drizzle",53: "Drizzle",55: "Heavy drizzle",
          61: "Light rain",63: "Rain",65: "Heavy rain",
          71: "Light snow",73: "Snow",75: "Heavy snow",
          80: "Rain showers",81: "Rain showers",82: "Heavy rain showers",
          85: "Snow showers",86: "Snow showers",
          95: "Thunderstorm",96: "Thunderstorm",99: "Severe thunderstorm",
          default: "Weather"
        },
        tr: {
          0: "Açık gökyüzü",1: "Genelde açık",2: "Parçalı bulutlu",3: "Kapalı",
          45: "Sisli",48: "Sisli",
          51: "Hafif çiseleme",53: "Çiseleme",55: "Kuvvetli çiseleme",
          61: "Hafif yağmur",63: "Yağmur",65: "Kuvvetli yağmur",
          71: "Hafif kar",73: "Kar",75: "Yoğun kar",
          80: "Sağanak yağmur",81: "Sağanak yağmur",82: "Kuvvetli sağanak yağmur",
          85: "Kar sağanağı",86: "Kar sağanağı",
          95: "Gök gürültülü fırtına",96: "Gök gürültülü fırtına",99: "Şiddetli fırtına",
          default: "Hava durumu"
        }
      };

      const map = maps[langPref] || maps.en;
      return map[code] || map.default;
    }

    function render(displayName,data){
      const today       = data.daily.time[0];
      const tomorrow    = data.daily.time[1];
      const todayMax    = data.daily.temperature_2m_max[0];
      const todayMin    = data.daily.temperature_2m_min[0];
      const tomorrowMax = data.daily.temperature_2m_max[1];
      const tomorrowMin = data.daily.temperature_2m_min[1];
      const current     = data.current_weather;
      const cloud       = data.hourly.cloudcover[0];
      const windNow     = data.hourly.windspeed_10m[0];
      const rainToday   = data.daily.precipitation_sum[0];
      const desc        = descForCode(current.weathercode);

      const rainValue = (rainToday?.toFixed ? rainToday.toFixed(1) : (rainToday || 0));
      const rainText = rainValue + lbl.rainUnitSuffix;

      const cardsHTML = `
        <div class="card">
          <div class="badge">${lbl.today}</div>
          <h3>${todayMax.toFixed(1)}/${todayMin.toFixed(1)}°C ${iconForCode(current.weathercode)}</h3>
          <div class="muted">${today}</div>
          <div class="muted">${lbl.rain}: ${rainText}</div>
        </div>
        <div class="card">
          <div class="badge">${lbl.tomorrow}</div>
          <h3>${tomorrowMax.toFixed(1)}/${tomorrowMin.toFixed(1)}°C</h3>
          <div class="muted">${tomorrow}</div>
          <div class="muted">${lbl.prediction}</div>
        </div>
        <div class="card">
          <div class="badge">${displayName}</div>
          <h3>${current.temperature.toFixed(1)}°C ${iconForCode(current.weathercode)}</h3>
          <div class="muted">${desc}</div>
          <div class="muted">${lbl.wind}: ${current.windspeed.toFixed(1)} km/h</div>
          <div class="muted">${lbl.cloud}: ${cloud}%</div>
          <div class="muted">${lbl.momentWind}: ${windNow.toFixed(1)} km/h</div>
        </div>
      `;

      const activeItem = document.querySelector(".city-item.active");
      if(activeItem){
        const extra = activeItem.querySelector(".city-extra-inner");
        if(extra){
          if(firstRender){
            extra.innerHTML = `<div class="grid">${cardsHTML}</div>`;
            Array.from(extra.querySelectorAll(".card")).forEach((el,idx)=>{
              el.style.setProperty("--delay", (idx*90) + "ms");
            });
            firstRender = false;
          }else{
            extra.classList.remove("fade-in");
            extra.classList.add("fade-out");
            setTimeout(()=>{
              extra.innerHTML = `<div class="grid">${cardsHTML}</div>`;
              Array.from(extra.querySelectorAll(".card")).forEach((el,idx)=>{
                el.style.setProperty("--delay", (idx*90) + "ms");
              });
              extra.classList.remove("fade-out");
              void extra.offsetWidth;
              extra.classList.add("fade-in");
              setTimeout(()=>extra.classList.remove("fade-in"), 350);
            },150);
          }
        }
      }
    }

    async function run(){
      try{
        status.textContent = lbl.loading;
        status.classList.add("is-loading");

        const q = cityEl.value.trim() || "Istanbul";
        const g = await geocode(q);
        const displayName = `${g.city}, ${g.countryCode}`;

        updateActiveHeader(g.city, g.countryCode);

        const w = await fetchWeather(g.lat,g.lon);
        render(displayName,w);

        status.textContent = ui.status;
      }catch(e){
        status.textContent = lbl.error;
        const activeItem = document.querySelector(".city-item.active");
        if(activeItem){
          const extra = activeItem.querySelector(".city-extra-inner");
          if(extra){
            extra.textContent = lbl.errorPrefix + e.message;
          }
        }
      }finally{
        status.classList.remove("is-loading");
      }
    }

    document.getElementById("search").addEventListener("click", run);
    cityEl.addEventListener("keydown",e=>{ if(e.key==="Enter") run(); });

    function setActive(item){
      cityItems.forEach(i=>i.classList.remove("active"));
      if(item) item.classList.add("active");
    }

    cityItems.forEach(item=>{
      const btn = item.querySelector(".city-btn");
      btn.addEventListener("click", ()=>{
        setActive(item);
        const label = item.querySelector(".city-name")?.textContent || item.dataset.city;
        cityEl.value = label;
        run();
      });
    });

    if(panel){
      panel.addEventListener("mousemove", (e)=>{
        const rect = panel.getBoundingClientRect();
        const x = ((e.clientX - rect.left) / rect.width) * 100;
        const y = ((e.clientY - rect.top) / rect.height) * 100;
        panel.style.setProperty("--hover-x", x + "%");
        panel.style.setProperty("--hover-y", y + "%");
      });
    }

    // ilk yüklemede İstanbul
    run();
  })();
  </script>
  <script src="../lang-helper.js"></script>
  <script src="../scroll-helper.js"></script>
</body>
</html>
